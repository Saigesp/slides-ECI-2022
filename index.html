<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Analizando datos, visualizando informaci贸n, contando historias</title>
    <meta charset="utf-8" />
    <meta name="author" content="Autor: Javier lvarez Li茅bana (UCM)" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/tile-view/tile-view.css" rel="stylesheet" />
    <script src="libs/tile-view/tile-view.js"></script>
    <link href="libs/animate.css/animate.xaringan.css" rel="stylesheet" />
    <link href="libs/tachyons/tachyons.min.css" rel="stylesheet" />
    <link href="libs/xaringanExtra-extra-styles/xaringanExtra-extra-styles.css" rel="stylesheet" />
    <script src="libs/clipboard/clipboard.min.js"></script>
    <link href="libs/xaringanExtra-clipboard/xaringanExtra-clipboard.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-clipboard/xaringanExtra-clipboard.js"></script>
    <script>window.xaringanExtraClipboard(null, {"button":"Click para copiar c贸digo","success":"C贸digo copiado","error":"Ctrl+C para copiar"})</script>
    <script src="libs/freezeframe/freezeframe.min.js"></script>
    <script src="libs/xaringanExtra-freezeframe/freezeframe-init.js"></script>
    <script id="xaringanExtra-freezeframe-options" type="application/json">{"selector":"img[src$=\"gif\"]","trigger":"click","overlay":false,"responsive":true,"warnings":true}</script>
    <link href="libs/animate.css-xaringan/animate.fade.css" rel="stylesheet" />
    <link href="libs/panelset/panelset.css" rel="stylesheet" />
    <script src="libs/panelset/panelset.js"></script>
    <link rel="stylesheet" href="style.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Analizando datos, visualizando informaci贸n, contando historias
## Curso de la ECI 2022
### Autor: Javier lvarez Li茅bana (UCM)
### (.css y .js basados en <mark><a href="https://github.com/dieghernan/rpubs" class="uri">https://github.com/dieghernan/rpubs</a></mark>)
### 31/01/2022 - 04/02/2022 (actualizado: 2022-01-17)

---





class: inverse center middle

# PRESENTACIN DEL CURSO



`$$\\[2.7in]$$`

.left[Pulsa &lt;kbd-black&gt;O&lt;/kbd-black&gt; para ver el panel de diapositivas]
.left[Pulsa &lt;kbd-black&gt;H&lt;/kbd-black&gt; para ver otros atajos]

---


# Material del curso

&lt;img src = "https://raw.githubusercontent.com/dadosdelaplace/slides-ECI-2022/main/img/imagen_curso.jpeg" alt = "course-ECI" align = "right" width = "360" style = "margin-top: 20vh;margin-right: 0.5rem;margin-left: 1rem;"&gt;

- **Web** del curso:

&lt;https://dadosdelaplace.github.io/curso-dataviz-ECI-2022&gt;



- **Diapositivas** del curso ([**c贸digo R de las diapositivas**](https://github.com/dadosdelaplace/slides-ECI-2022)):

&lt;https://dadosdelaplace.github.io/slides-ECI-2022&gt;



- **Manual** del curso ([**c贸digo R del manual**](https://github.com/dadosdelaplace/courses-ECI-2022)):

&lt;https://dadosdelaplace.github.io/courses-ECI-2022&gt;



- **Scripts** del curso:

&lt;https://github.com/dadosdelaplace/courses-ECI-2022/tree/main/scripts&gt;


&amp;nbsp;

- **Grupo de Telegram** para dudas, preguntas y dem谩s cosicas:

&lt;https://t.me/curso_dataviz_ECI&gt;

---


# Objetivos

&lt;img src = "https://raw.githubusercontent.com/dadosdelaplace/slides-ECI-2022/main/img/imagen_curso.jpeg" alt = "course-ECI" align = "right" width = "360" style = "margin-top: 20vh;margin-right: 0.5rem;margin-left: 1rem;"&gt;

隆Bienvenidos/as/es!

Tomen asiento, entren a la secta del **software libre** y dejen sus Excel en la entrada



El **objetivo** del curso no es ser un/a sesudo/a programador/a de `R`, sino adquirir los suficientes conocimientos como para lograr 5 objetivos:


- **Perder el miedo** a programar.
- Entender los [**conceptos b谩sicos de R**](https://cran.rstudio.com/), lenguaje estad铆stico por excelencia, desde cero.
- Dotarnos de **autonom铆a en el an谩lisis** de datos.
- Crear programas y flujos de trabajo **reproducibles** y mantenibles.
- Adquirir habilidades en la **visualizaci贸n de datos** en `R` (haciendo uso tambi茅n de otras herramientas como [**Datawrapper**](https://www.datawrapper.de/)), incluyendo la visualizaci贸n de datos en **mapas**.


&amp;nbsp;

 Estas **diapositivas** han sido elaboradas con el propio `R` haciendo uso del paquete `{xaringan}`
y `{xaringanExtra}`.

---

class: inverse middle

### BLOQUE I. Introducci贸n a R desde cero

* Instalaci贸n de R y RStudio. Primeros pasos. Tipos de datos.
* Datos estructurados: matrices y data.frame
* Extras: estructuras de control, proyectos, funciones y datos en formato tibble


### BLOQUE II. Introducci贸n a dataviz y  estad铆stica con R

* Introducci贸n a estad铆stica b谩sica: centralizaci贸n y dispersi贸n, conceptos de regresi贸n e inferencia.
* Tidy data. Introducci贸n a Tidyverse
* Dataviz: la importancia de visualizar datos. Introducci贸n a ggplot2. Visualizaci贸n en tablas

### BLOQUE III. Periodismo de datos

Impartido por Borja Andrino, Javier lvarez Li茅bana y Gabriel Valverde Castilla.

### BLOQUE IV. Story Telling

Impartido por Vict貌ria Oliveres, Javier lvarez Li茅bana y Gabriel Valverde Castilla.

### BLOQUE V. Visualizaci贸n de datos en mapas

Impartido por Dominic Roy茅, Javier lvarez Li茅bana y Gabriel Valverde Castilla.

---

class: inverse center middle

# Bloque I: introducci贸n a R desde cero.

&amp;nbsp;

### [Instalaci贸n y primeros pasos](#instalacion-primeros-pasos)

### [Celdas: tipos de datos](#tipos-datos)

### [Columnas: vectores](#vectores)

### [Tablas: estructuras de datos](#matrices-dataframes)

### [Extras: estructuras de control](#estructuras)

### [Primer proyecto. Funciones](#proyecto-funciones)

### [Mejorando los datos: tibble](#tibble)

### [Caso pr谩ctico: informe RMarkdown](#rmarkdown)

### [Evaluaci贸n](#evaluacion)

---
name: instalacion-primeros-pasos
class: center, middle

# Instalaci贸n y primeros pasos

## **Instalaci贸n de R**

&amp;nbsp;

Programaremos como escribimos un libro: necesitamos una **gram谩tica** (`R`) y un **Word** (`RStudio`).

---

# Requisitos del curso

Para el presente curso los 煤nicos **requisitos** ser谩n:

1. **Conexi贸n a internet** (para la descarga de algunos datos y paquetes).

2. **Instalar R**: ser谩 nuestro **lenguaje**, nuestro **castellano** para poder 芦comunicarnos con el ordenador. La descarga la haremos (gratuitamente) desde &lt;https://cran.r-project.org/&gt;

3. **Instalar R Studio**. De la misma manera que podemos escribir castellano en un ordenador, en un Word, en un papel o en un tuit, podemos usar distintos IDE (entornos de desarrollo integrados, nuestro Office), para que el trabajo sea m谩s c贸modo. Nuestro **Word** para nosotros ser谩 **RStudio**.

.left[
  &lt;img src = "https://raw.githubusercontent.com/dadosdelaplace/slides-ECI-2022/main/img/cran-R.jpg" alt = "cran-R" align = "left" width = "500" style = "margin-top: 5vh"&gt;
]
.right[
  &lt;img src = "https://raw.githubusercontent.com/dadosdelaplace/slides-ECI-2022/main/img/R-studio.jpg" alt = "RStudio" align = "right" width = "500" style = "margin-top: 5vh;"&gt;
]

---

# Instalaci贸n de R

El **lenguaje de programaci贸n R** ser谩 nuestra **gram谩tica**, nuestra ortograf铆a y nuestro diccionario

&amp;nbsp;

&lt;img src = "https://dadosdelaplace.github.io/courses-ECI-2022/img/pantalla1_cran.jpg" alt = "cran-R" align = "right" width = "500" style = "margin-top: 10vh;margin-right: 0.5rem;margin-left: 1rem;"&gt;

* **Paso 1**: entra en la [web oficial de R](https://cran.r-project.org/) y selecciona la instalaci贸n acorde a tu sistema operativo.

* **Paso 2**: para **Mac** basta con que hacer click en el archivo **.pkg**, y abrirlo una vez descargado. Para sistemas **Windows**, debemos clickar en `install R for the first time` y en la siguiente pantalla hacer click en `Download R for Windows`. Una vez descargado, **abrirlo como cualquier archivo de instalaci贸n**.

* **Paso 3**: abrir el **ejecutable** de tu escritorio o en tu Launchap (en Windows puede que tengas dos ejecutables i386 y x64, la versi贸n de 32 y de 64 bits; haz click preferiblemente en el de x64).

---

# Primera operaci贸n

Para comprobar que se ha instalado correctamente, tras abrir `R`, deber铆as ver una **pantalla blanca** similar a esta (en realidad se llama **consola**)

&lt;img src = "https://dadosdelaplace.github.io/courses-ECI-2022/img/cranR.jpg" alt = "consola" align = "left" width = "350" style = "margin-top: 5vh;margin-right: 3rem;"&gt;

Vamos a escribir **nuestra primera operaci贸n** en la consola:

* Una variable llamada `a` le asignaremos el valor `1`. En `R` asignaremos valores con `&lt;-`, como una flecha: `a &lt;- 1` significa que a una variable que llamamos a le asignamos el valor 1.

* Una variable llamada `b` le asignaremos el valor `2`.

* **Sumamos las variables** haciendo `a + b`.


```r
# Primera operaci贸n
a &lt;- 1 # Una variable a con valor --&gt; 1
b &lt;- 2 # Una variable b con valor --&gt; 2
*a + b
```

El **resultado** que nos devuelve la consola ser谩 3 (2 + 1).


```
&gt; [1] 3
```


---

# Instalaci贸n de R Studio

El **Word**  que usaremos para trabajar y escribir en nuestro lenguaje ser谩 **RStudio** (lo que se conoce como un IDE: entorno integrado de desarrollo).

&amp;nbsp;

&lt;img src = "https://dadosdelaplace.github.io/courses-ECI-2022/img/pantalla_rstudio.jpg" alt = "RStudio" align = "right" width = "450" style = "margin-top: 10vh;margin-right: 2rem;"&gt;

* **Paso 1**: entra la [web oficial de RStudio](https://www.rstudio.com/products/rstudio/download/#download) y selecciona la descarga gratuita.

* **Paso 2**: selecciona el ejecutable que te aparezca acorde a tu sistema operativo. 

* **Paso 3**: tras descargar el ejecutable, hay que abrirlo como otro cualquier otro ejecutable y dejar que termine la instalaci贸n.


---

# Organizaci贸n de RStudio

&lt;img src = "https://dadosdelaplace.github.io/courses-ECI-2022/img/inicio_rstudio_2.jpg" alt = "Rstudio" align = "left" width = "333" style = "margin-top: 3vh;margin-right: 2rem;margin-bottom: 1vh;"&gt;
&lt;img src = "https://dadosdelaplace.github.io/courses-ECI-2022/img/inicio_rstudio_3.jpg" alt = "Rstudio" align = "left" width = "283" style = "margin-top: 3vh;margin-right: 2rem;margin-bottom: 1vh;"&gt;
&lt;img src = "https://dadosdelaplace.github.io/courses-ECI-2022/img/inicio_rstudio_4.jpg" alt = "Rstudio" align = "left" width = "298" style = "margin-top: 3vh;margin-right: 2rem;margin-bottom: 1vh;"&gt;


&amp;nbsp;



* **Consola**: es el nombre para llamar a la ventana grande que te ocupa buena parte de tu pantalla. Prueba a escribir el mismo c贸digo que antes (la suma) en ella. La consola ser谩 donde **ejecutaremos 贸rdenes y mostraremos resultados**.

* **Environment (entorno de variables)**: la pantalla peque帽a (puedes ajustar los m谩rgenes con el rat贸n a tu gusto) que tenemos en la parte superior derecha. Nos mostrar谩 las **variables que tenemos definidas, el tipo y su valor**.

* **Panel multiusos**: la ventana que tenemos en la parte inferior derecha no servir谩 para buscar **ayuda de funciones**, adem谩s de para **visualizar gr谩ficos**. 



---

# Tips de RStudio: modo oscuro


&lt;img src = "https://dadosdelaplace.github.io/courses-ECI-2022/img/menu_1.jpg" alt = "Rstudio" align = "left" width = "300" style = "margin-top: 3vh;margin-right: 2rem;"&gt;
&lt;img src = "https://dadosdelaplace.github.io/courses-ECI-2022/img/menu_2.jpg" alt = "Rstudio" align = "left" width = "350" style = "margin-top: 3vh;margin-right: 2rem;"&gt;

**Consejo**: cambiar en tu `RStudio` la tonalidad del fondo de tu programa, en tonos oscuros y no blancos.

---

# 驴Qu茅 es R?

&lt;img src = "https://logos.turbio.repl.co/rlang.svg" alt = "Rstudio" align = "left" width = "350" style = "margin-top: 3vh;margin-right: 2rem;"&gt;


&amp;nbsp;



`R` es un **lenguaje estad铆stico**, creado por y para la estad铆stica, con 4 ventajas fundamentales:

--

* **Software libre** (como C++, Python, Fortran, y otros tantos lenguajes). El software libre no solo tiene una ventaja evidente (es gratis, ok) sino que permite **acceder libremente a c贸digo ajeno**.

--

* **Lenguaje modular**: en la instalaci贸n que hemos realizado no se han instalado todas las funcionalidades, solo el m铆nimo para poder funcionar, de forma que se ahorra espacio en disco y en memoria. Al ser software libre, existen trozos de **c贸digo hechos por otras personas llamados paquetes**, que podemos ir instalando a nuestro gusto seg煤n los vayamos necesitando.

--

* **Gran comunidad de usuarios**: `R` tiene una comunidad de usuarios gigante para hacer estad铆stica (Python tiene una enorme comunidad pero m谩s enfocada al Machine Learning), con m谩s de 18 000 paquetes.

--

* **Lenguaje de alto nivel**. Los lenguajes de alto nivel, como `R` o `Python`, facilitan la programaci贸n al usuario, teniendo que preocuparte solo de la tarea de programar. Son lenguajes con una menor curva de aprendizaje aunque suelen ser m谩s lentos en su ejecuci贸n en comparaci贸n con lenguajes de bajo nivel (`C`, `C++` o `Fortran`).

---

class: inverse center middle

COMPRAR un libro --&gt; instalar un paquete (una sola vez) `install.packages()`
&lt;figure&gt;
&lt;img src = "https://cdn.cienradios.com/wp-content/uploads/sites/14/2020/09/Book-Depository-2.jpg" alt = "comprar-libros" align = "middle" width = "480" style = "margin-top: 1vh;"&gt;
&lt;/figure&gt;

SELECCIONAR un libro (ya comprado) --&gt; acceder a un paquete ya instalado (en cada sesi贸n que queramos usarlo) `library()`
&lt;figure&gt;
&lt;img src = "https://cdn.sincroguia.tv/uploads/programs/l/a/-/la-biblioteca-de-los-libros-rechazados-704306_SPA-77.jpg" alt = "comprar-libros-2" align = "middle" width = "480" style = "margin-top: 1vh;"&gt;
&lt;/figure&gt;


---

# Paquetes en R

Como hemos mencionado, existen trozos de **c贸digo hechos por otras personas llamados paquetes**, que podemos ir instalando a nuestro gusto seg煤n los vayamos necesitando.


&amp;nbsp;


A lo largo del curso usaremos varios de esos paquetes, pero el m谩s importante para nuestro objetivo es el paquete `{ggplot2}`, un paquete para la **elaboraci贸n de visualizaciones de datps**. Vamos a instalarlo (necesitamos internet para ello) con la orden `install.packages("ggplot")`


```r
install.packages("ggplot2")
```


&amp;nbsp;



La **instalaci贸n de un paquete** es el equivalente a comprar a un libro: solo lo debemos hacer **la primera vez** que lo usemos en un ordenador (descarg谩ndose los archivos del paquete a nuestro local). Una vez que tenemos comprado nuestro libro, para poder usarlo, simplemente debemos **indicar al programa que nos lo acerque de la estanter铆a** con `library(ggplot2)`.


```r
library(ggplot2)
```

---

class: inverse center middle

# 驴Por qu茅 no usar Excel?


&lt;img src = "https://upload.wikimedia.org/wikipedia/commons/9/92/Soup_Spoon.jpg" alt = "cuchara" align = "middle" width = "600" style = "margin-top: 3vh;"&gt;


Excel es una excelente cuchara: puedes ser el mejor partiendo un filete con una cuchara, pero seguir谩s siendo una persona comiendo filete con cuchara.

---

# 驴Por qu茅 no usar Excel?

Excel es una **hoja de c谩lculo**, ni m谩s ni menos, y el propio **Microsoft desaconseja el uso de Excel para el an谩lisis de datos**. El Excel es una herramienta maravillosa para ser usada como una sencilla hoja de c谩lculo:

* Llevar las cuentas de tu familia.
* Una declaraci贸n de Renta sencilla.
* Planificar viajes

&amp;nbsp;

**NO EST DISEADO** para ser una base de datos, y muchos menos pensado para generar un entorno flexible para el an谩lisis estad铆stico y la visualizaci贸n de datos, con algunas desventajas:


* **Software de pago** (bien por el usuario, bien por la administraci贸n o empresa).

* **Software cerrado**: solo podemos hacer lo que Excel ha cre铆do que interesante que podamos hacer. Incluso con la programaci贸n de macros, las funcionalidades de Excel siguen siendo mucho m谩s limitadas

* **Alto consumo de memoria**.

* **No es universal**: no solo es de pago sino que adem谩s, dependiendo de la versi贸n que tengas de Excel, tendr谩 un formato distinto para datos como fechas, teniendo incluso extensiones distintas.

---


# Epic fails en Excel


.pull-left[&lt;img src = "https://dadosdelaplace.github.io/courses-ECI-2022/img/excel_genes.jpg" alt = "Rstudio" align = "left" width = "250"&gt;

&lt;img src = "https://dadosdelaplace.github.io/courses-ECI-2022/img/excel_uk.jpg" alt = "Rstudio" align = "left" width = "250"&gt;

&lt;img src = "https://dadosdelaplace.github.io/courses-ECI-2022/img/excel_edades.jpg" alt = "Rstudio" align = "left" width = "250"&gt;]

.pull-right[



&amp;nbsp;




## Problemas de **versiones**


&amp;nbsp;



&amp;nbsp;




## Problemas de **memoria**



&amp;nbsp;



## Problemas de **codificaci贸n**



]

---

# Primeros pasos en R: calculadora

Empecemos por lo sencillo: **驴c贸mo usar R como una calculadora?** Si escribimos `2 + 1` en la consola y pulsamos ENTER, la consola nos mostrar谩 el resultado de la suma.


```r
2 + 1
```

```
&gt; [1] 3
```

&amp;nbsp;

Si dicha suma la quisi茅ramos utilizar para un segundo c谩lculo: 驴y si la **almacenamos en alguna variable**?


```r
*x &lt;- 2 + 1
x + 3
```

```
&gt; [1] 6
```

&lt;img src = "https://dadosdelaplace.github.io/courses-ECI-2022/img/environment_1.jpg" alt = "environment" align = "right" width = "450"&gt;



```r
y &lt;- 5
x + y
```

```
&gt; [1] 8
```

---

# Primeros pasos en R: calculadora

### Multiplicaci贸n


```r
x * y
```

### Elevar al cuadrado


```r
x^2
```

### Valor absoluto


```r
abs(x)
```

### Ra铆z cuadrada


```r
sqrt(-1)
```

```
&gt; Warning in sqrt(-1): Se han producido NaNs
```

```
&gt; [1] NaN
```

---

# Errores

Durante tu aprendizaje va a ser **muy habitual que las cosas no salgan a la primera**, apareciendo en consola mensajes en un color rojo. Un miedo muy habitual cuando se empieza a programar es pensar que si haces algo mal o aparece alg煤n mensaje de error, el **ordenador puede explotar en cualquier momento**. 

A **programar se aprende programando**, as铆 que haz las pruebas que quieras.

---

# Mensajes de 芦error禄


* **Mensajes de ERROR**: ir谩n precedidos de la frase `芦Error inβ`, y ser谩n aquellos **fallos que impidan la ejecuci贸n del c贸digo** (un error muy habitual es intentar acceder a funciones de alg煤n paquete sin tenerlo instalado: est谩s intentando leerte un libro de tu biblioteca pero ni siquiera has ido a la tienda a 芦comprarlo禄). Veamos un ejemplo intentando sumar un n煤mero a un texto.


```r
"a" + 1
```

```
&gt; Error in "a" + 1: argumento no-num茅rico para operador binario
```

&amp;nbsp;

* Mensajes **WARNING**: ir谩n precedidos de la frase `芦Warning inβ`, y son los fallos m谩s delicados ya que son posibles incoherencias pero que no van a hacer que tu c贸digo deje de ejecutarse.


```r
sqrt(-1)
```

```
&gt; Warning in sqrt(-1): Se han producido NaNs
```

```
&gt; [1] NaN
```


**驴Ha ejecutado la orden?** S铆, pero te advierte de que el resultado de la operaci贸n es un NaN, _Not A Number_, un valor que no existe (al menos dentro de los n煤meros reales).


---

# 驴D贸nde programamos? Script

Un **script** ser谩 el documento en el que programamos, nuestro equivalente a un archivo `.doc`, pero aqu铆 ser谩 un archivo con extensi贸n `.R`, donde escribiremos las 贸rdenes.

&amp;nbsp;

Es **importante no abusar de la consola**: todo lo que no escribas en un script, cuando cierres `RStudio`, lo habr谩s perdido (c贸mo si en lugar de escribir en un Word y guardarlo, nunca guardases el documento).

&amp;nbsp;

Para **abrir nuestro primero script**, haz click en el men煤 superior en `File &lt;&lt; New File &lt;&lt; R Script`.

&lt;img src = "https://dadosdelaplace.github.io/courses-ECI-2022/img/inicio_rstudio_5.jpg" alt = "environment" align = "right" width = "450"&gt;


---

# Ejecutar nuestros scripts

Ahora tenemos una **cuarta ventana**: la ventana donde **escribiremos nuestros c贸digos**

&amp;nbsp;

### 驴C贸mo ejecutar nuestro script?

&lt;img src = "https://dadosdelaplace.github.io/courses-ECI-2022/img/inicio_rstudio_6.jpg" alt = "environment" align = "left" width = "550" style = "margin-top: 3vh;margin-right: 2rem;"&gt;


1. Escribimos el c贸digo que queremos ejecutar (en este caso, la suma de antes).

2. Guardamos el archivo `.R` haciendo click en el bot贸n de guardar (`Save current document`)

3. El c贸digo **no se ejecuta salvo que se lo indiquemos**. Tenemos tres opciones:

  - **Copiar y pegar en consola** el c贸digo.
  - **Seleccionar las l铆neas de c贸digo** a ejecutar y clickar en `Run` (o con su atajo).
  - Activar el cuadrado `Source on save` a la **derecha del bot贸n de guardar**: no solo se nos guarda sino que se ejecuta el c贸digo completo.


---

# Primeros ejercicios: trasteando con la consola


.panelset[
.panel[.panel-name[Ejercicios]


*  **Ejercicio 1**: en tu consola asigna los valores 2 y 5 a dos variables `a` y `b`. Tras asignarles valores, multiplica los n煤meros en consola.

*  **Ejercicio 2**: modifica el c贸digo inferior para definir dos variables `c` y `d`, con valores 3 y -1, y calcular la divisi贸n `c/d`.


```r
c &lt;- # deber铆as asignarle el valor 3
d &lt;- # deber铆as asignarle el valor -1

c ? d # modifica el c贸digo para realizar una divisi贸n 
```

*  **Ejercicio 3**: repite el ejercicio 1 pero ahora guarda el resultado de la multiplicaci贸n final en una variable `c`. Para ver el resultado guardado en `c` escribe dicha variable en consola.

*  **Ejercicio 5**: repite el ejercicio 3 pero ahora escribe el c贸digo en un script (`script01.R`). Ejecuta el c贸digo.

]

.panel[.panel-name[Soluci贸n ej. 1]


```r
# Para poner comentarios en el c贸digo se usa #

# Definici贸n de variables
a &lt;- 2
b &lt;- 5

# Multiplicaci贸n
a * b
```

```
&gt; [1] 10
```
]

.panel[.panel-name[Soluci贸n ej. 2]


```r
# Definici贸n de variables
c &lt;- 3
d &lt;- -1

# Divisi贸n
a / b
```

```
&gt; [1] 0.4
```
]

.panel[.panel-name[Soluci贸n ej. 3]


```r
# Variables
a &lt;- 2
b &lt;- 5

# Resultado
c &lt;- a * b

# Muestro en consola
c
```

```
&gt; [1] 10
```
]

.panel[.panel-name[Soluci贸n ej. 5]

&lt;img src = "
https://dadosdelaplace.github.io/courses-ECI-2022/img/consola_multiplicacion_3.jpg" alt = "script01" align = "middle" width = "420" style = "margin-top: 1vh;"&gt;

Tienes todos los scripts en &lt;https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/&gt; (el  `script01.R` en concreto en &lt;https://github.com/dadosdelaplace/courses-ECI-2022/blob/main/scripts/script01.R&gt;

]
]


---
name: tipos-datos
class: center, middle

# Tipos de datos 

## **Celdas: tipos de datos individuales**

&amp;nbsp;

驴De qu茅 tipo pueden ser los datos que tenemos contenidos en cada celda de una 芦tabla禄?

---

# Datos: de la celda a la tabla

&lt;img src = "https://raw.githubusercontent.com/dadosdelaplace/slides-ECI-2022/main/img/celdas.jpg" alt = "celdas" align = "center" width = "850" style = "margin-top: 1vh;"&gt;


* **Celda**: un dato de un tipo concreto.
* **Variable**: concatenaci贸n de datos del mismo tipo.
* **Matriz**: concatenaci贸n de variables del mismo tipo y longitud.
* **Tabla**: concatenaci贸n de variables de distinto tipo pero igual longitud.

---

# Celdas: tipos de datos individuales

**驴Existen variables m谩s all谩 de los n煤meros?**


&amp;nbsp;

Piensa por ejemplo en los **datos guardados de una persona**:

* La edad o el peso ser谩 un **n煤mero**.
* Su nombre ser谩 una cadena de **texto**.
* Su fecha de nacimiento ser谩 precisamente eso, una **fecha**.
* A la pregunta 芦驴est谩 usted soltero/a?禄 la respuesta ser谩 lo que llamamos una **variable binaria o l贸gica** (`TRUE` si est谩 soltero/a o `FALSE` en otro caso).

&lt;img src = "https://raw.githubusercontent.com/dadosdelaplace/slides-ECI-2022/main/img/celdas.jpg" alt = "celdas" align = "center" width = "600" style = "margin-top: 1vh;"&gt;

---

# Variables num茅ricas

El **dato m谩s sencillo**, dato que ya hemos usado en nuestros primeros pasos como calculadora.


```r
a &lt;- 1
b &lt;- 2
a + b
```

&amp;nbsp;

En el c贸digo anterior, tanto `a` como `b`, como la suma `a + b`**, son de tipo num茅rico**


```r
# Clase de las variables
class(a)
```

```
&gt; [1] "numeric"
```

```r
# Tipolog铆a interna
*typeof(a)
```

```
&gt; [1] "double"
```

**Operaciones**: con los datos num茅ricos podemos realizar todas las **operaciones aritm茅ticas** que se nos ocurrir铆a hacer en una **calculadora**.


```r
b^3
```

```
&gt; [1] 125
```


---

# Variables de texto

No solo de n煤meros viven los datos: imagina que adem谩s de la edad de una persona queremos guardar su nombre.


```r
edad &lt;- 32
nombre &lt;- "Javier"

class(nombre)
```

```
&gt; [1] "character"
```

```r
typeof(nombre)
```

```
&gt; [1] "character"
```

&amp;nbsp;

La variable `nombre` es de **tipo caracter**: una **cadena de texto** (conocido en otros lenguajes como string o char) entre **comillas**.

Las cadenas de texto son un **tipo especial de dato** con los que obviamente no podremos hacer operaciones aritm茅ticas, pero si podemos hacer **otras operaciones**.

---

# Nuestra primera funci贸n: paste

Una **funci贸n** es un **c贸digo encapsulado**: ejecuta un c贸digo en funci贸n de unos **argumentos de entrada**. Nuestra primera funci贸n ser谩 `paste()`: dadas **dos cadenas de texto como argumento de entrada** nos permite pegarlas, indic谩ndole en el **argumento** `sep = ` el caracter que queremos entre medias.


```r
# todo junto, sin espacios, igual a paste0("Javier", "lvarez")
paste("Javier", "lvarez", sep = "") 
```

```
&gt; [1] "Javierlvarez"
```


```r
paste("Javier", "lvarez") # separados por un espacio
```

```
&gt; [1] "Javier lvarez"
```


```r
paste("Javier", "lvarez", sep = ".") # separados por un punto .
```

```
&gt; [1] "Javier.lvarez"
```

**Argumentos por defecto**: `paste(nombre, apellido)` es equivalente a `paste(nombre, apellido, sep = " ")`. El argumento `sep` tiene un **valor por defecto** `sep = " "`: si no se le asigna otro, tomar谩 ese por defecto

---

# Nuestro primer paquete: glue

Otra forma **m谩s intuitiva de trabajar con textos** es usar el **paquete** `{glue}`.



```r
install.packages("glue") # solo la primera vez
library(glue)
```



Recuerda que `install.packages()` es solo necesario la primera que 芦compramos el libro禄: cada vez que queramos usarlo bastar谩 con `library()`.

&amp;nbsp;

Con dicho paquete podemos **usar variables dentro de cadenas de texto**. Por ejemplo, vamos a crear 芦la edad es de ... a帽os禄, donde la edad concreta la tenemos guardada en una variable `edad`.


```r
edad &lt;- 32
glue("La edad es de {edad} a帽os")
```

```
&gt; La edad es de 32 a帽os
```

---

# Variables l贸gicas

Una **variable l贸gica, binaria o booleana** es aquella que **solo puede tomar dos valores (en realidad pueden tomar un tercer valor, ausente):

* `TRUE`, verdadero, guardado internamente como un 1.
* `FALSE`, verdadero, guardado internamente como un 1.


```r
soltero &lt;- TRUE # 驴Es soltero? --&gt; S
class(soltero)
```

```
&gt; [1] "logical"
```

&amp;nbsp;

**NO son variables de texto**: "TRUE" es un texto (como rojo o azul), `TRUE` es una valor l贸gico.


```r
TRUE + 1
```

```
&gt; [1] 2
```

```r
"TRUE" + 1
```

```
&gt; Error in "TRUE" + 1: argumento no-num茅rico para operador binario
```

---

# Condiciones l贸gicas

Los valores l贸gicos suelen ser **resultado de evaluar condiciones l贸gicas**. Por ejemplo, imaginemos que queremos comprobar si una persona est谩 o no soltero, con el **operador l贸gico** `==` (驴lo de la izquierda es igual a lo de la derecha) y su opuesto `!=` (distinto de).


```r
soltero &lt;- TRUE # persona soltera
soltero == TRUE # 驴est谩 soltero?
```

```
&gt; [1] TRUE
```

```r
soltero != TRUE # 驴no est谩 soltero?
```

```
&gt; [1] FALSE
```


Por el mismo razonamiento podemos **comparar si una variable num茅rica** cumple una condici贸n. 驴Tiene la persona menos de 32 a帽os? Adem谩s de las comparaciones 芦igual a禄  frente 芦distinto禄, tambi茅n comparaciones de orden como `&lt;, &lt;=, &gt; o &gt;=`.


```r
edad &lt;- 38
edad &lt; 32
```

```
&gt; [1] FALSE
```

---

# Combinar condiciones l贸gicas

Las **condiciones l贸gicas pueden ser combinadas**, principalmente de dos maneras:

* **Intersecci贸n**: **todas** las condiciones concatenadas se deben cumplir (conjunci贸n y, operador `&amp;`) para devolver un `TRUE`.

* **Uni贸n**: basta con que **una** de las condiciones concatenadas se cumpla (conjunci贸n o, operador `|`) para devolver un `TRUE`.

&amp;nbsp;

Ejemplo: podr铆amos preguntarnos si la persona tiene menos de 32 a帽os y est谩 soltero (AMBAS deben cumplirse).


```r
edad &lt; 32 &amp; soltero
```

```
&gt; [1] FALSE
```

El resultado es `FALSE` ya que solo se cumple una de las condiciones. Si nos bastase con una (芦驴est谩 soltero y/o tiene menos de 32 a帽os?禄), el valor devuelto ser铆a `TRUE`


```r
edad &lt; 32 | soltero
```

```
&gt; [1] TRUE
```

---

# Variables de tipo fecha

Las **variables de tipo fecha** son de un tipo muy especial: no son una simple cadena de texto "2021-04-21", representan un **instante temporal**.


```r
# Cadena de texto
fecha_char &lt;- "2021-04-21"
fecha_char + 1
```

```
&gt; Error in fecha_char + 1: argumento no-num茅rico para operador binario
```

Para **convertirlo a una fecha** podemos usar la funci贸n `as.Date()` 


```r
fecha_date &lt;- as.Date("2021-04-21")
fecha_date 
```

```
&gt; [1] "2021-04-21"
```

```r
fecha_date + 1
```

```
&gt; [1] "2021-04-22"
```

Dado que internamente es un n煤mero, **podemos restar fechas** (d铆as entre ambas), podemos sumar n煤meros a fechas (fecha d铆as despu茅s), etc.


```r
as.Date("2021-04-21") - as.Date("2021-02-15")
```

```
&gt; Time difference of 65 days
```

---

# Funcionalidades de fechas

**驴C贸mo obtener autom谩ticamente la fecha de hoy?**


```r
Sys.Date()
```

```
&gt; [1] "2022-01-17"
```

&amp;nbsp;

**驴C贸mo convertir una cadena de texto a fecha?** Basta usar la funci贸n `as.Date()`, pas谩ndole como argumento la fecha y su formato .


```r
as.Date("10-03-2020", "%d-%m-%Y") # con d铆a-mes-a帽o (4 cifras)
```

```
&gt; [1] "2020-03-10"
```

```r
as.Date("10-03-20", "%d-%m-%y")  # con d铆a-mes-a帽o (2 cifras)
```

```
&gt; [1] "2020-03-10"
```


Dentro del **paquete `{lubridate}` tenemos bastantes **funciones 煤tiles** para trabajar con fechas como las siguientes.

---

# Paquete lubridate



```r
install.packages("lubridate") # solo la primera vez
library(lubridate)
```




```r
today()
```

```
&gt; [1] "2022-01-17"
```

```r
fecha &lt;- now()
year(fecha)
```

```
&gt; [1] 2022
```

```r
month(fecha)
```

```
&gt; [1] 1
```

```r
fecha &gt; ymd(20170131)
```

```
&gt; [1] TRUE
```

---

# Tips

Dentro del entorno de paquetes tidyverse, el paquete stringr permite un manejo m谩s complejo de cadenas de texo (como el uso de expresiones regulares).

lubridate

ayuda ? 

---

name: vectores
class: center, middle

# Vectores


## **Variables: colecci贸n de datos individuales de igual tipo**

&amp;nbsp;

驴C贸mo concatenar edades de varias personas? 驴C贸mo ordenarlas?

---

background-image: url(https://github.com/yihui/xaringan/releases/download/v0.0.2/karl-moustache.jpg)
background-position: 50% 50%
class: center, bottom, inverse

# You only live once!

---

class: center, middle

# 隆Much铆simas gracias a todos/as!

Las diapositivas han sido generadas con el paquete [**{xaringan}**](https://github.com/yihui/xaringan).


Los estilos (.css y .js) de estas diapositivas est谩n basados en las diapositivas del repositorio &lt;https://github.com/dieghernan/rpubs&gt;
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"slideNumberFormat": "%current%",
"highlightStyle": "github",
"highlightLines": true,
"ratio": "16:9",
"countIncrementalSlides": true
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
